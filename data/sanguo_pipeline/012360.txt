诸葛亮迁移西县百姓千余户，退军汉中，处死马谡，向全军承认错误，并向后主上奏说：“臣下以浅薄的才能，担当了不能胜任的职务，亲自领受君令和所赐锦旗斧钺以激励三军，却未能按照规章、严明军纪，面临大事而犹豫决策，以致发生了街亭违背军令的错误，箕谷发兵失于处事不谨慎，其责任都由于为臣用人不当。