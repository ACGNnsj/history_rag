张鲁的队伍大多屯集在巴西郡，于是刘璋便任命庞羲为巴西太守，让他带兵抵御张鲁。